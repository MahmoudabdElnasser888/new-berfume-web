<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>إدارة المخزون</title>
<style>
  body { font-family: Arial, sans-serif; direction: rtl; padding: 20px; }
  table { border-collapse: collapse; width: 100%; margin-top: 20px; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
  button { padding: 5px 10px; }
  #adminPanel { display: none; }
  #loginBox { text-align: center; margin-top: 50px; }
</style>
</head>
<body>

<h1>لوحة إدارة المخزون</h1>

<!-- صندوق تسجيل الدخول -->
<div id="loginBox">
  <h2>أدخل كلمة السر</h2>
  <input type="password" id="password" placeholder="كلمة السر">
  <button onclick="checkPassword()">دخول</button>
</div>

<!-- لوحة التحكم -->
<div id="adminPanel">
  <table>
    <thead>
      <tr>
        <th>المنتج</th>
        <th>الكمية</th>
        <th>تحكم</th>
      </tr>
    </thead>
    <tbody id="productsTable"></tbody>
  </table>
  <br>
  <button onclick="saveChanges()">حفظ التغييرات</button>
</div>

<script>
// كلمة السر
const ADMIN_PASSWORD = "mahmoud7777c50"; // غيرها للباسورد اللي تريده

let products = JSON.parse(localStorage.getItem("productsData")) || [];

function checkPassword(){
  let entered = document.getElementById("password").value;
  if(entered === ADMIN_PASSWORD){
    document.getElementById("loginBox").style.display = "none";
    document.getElementById("adminPanel").style.display = "block";
    renderTable();
  } else {
    alert("كلمة السر غير صحيحة!");
  }
}

function renderTable(){
  let table = document.getElementById("productsTable");
  table.innerHTML = "";
  products.forEach((prod, index) => {
    table.innerHTML += `
      <tr>
        <td>${prod.name}</td>
        <td id="qty-${index}">${prod.quantity}</td>
        <td>
          <button onclick="changeQty(${index}, 1)">+</button>
          <button onclick="changeQty(${index}, -1)">-</button>
        </td>
      </tr>
    `;
  });
}

function changeQty(index, change){
  products[index].quantity += change;
  if(products[index].quantity < 0) products[index].quantity = 0;
  document.getElementById(`qty-${index}`).innerText = products[index].quantity;
}

function saveChanges(){
  localStorage.setItem("productsData", JSON.stringify(products));
  alert("تم حفظ التغييرات");
}
</script>

</body>
</html>
